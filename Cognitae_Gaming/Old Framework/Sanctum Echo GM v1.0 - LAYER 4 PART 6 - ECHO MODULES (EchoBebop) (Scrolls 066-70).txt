#----------------------------------------------------------------------------------#
id: SGM-066
file: 066_EchoBebop_Core.yaml
title: "Echo Bebop: Core Mechanics"
version: "1.0.0"
architect: "ðŸ— Shoji & The Sanctum Companions"
purpose: "Defines the core loop: taking bounties, investigating targets, and space-western shootouts."
primary_companion: ðŸ•¶ï¸ MF.AI

preamble:
  text: >
    THE SCENE IS A DUSTY STARPORT, SMELLS LIKE SPILT FUEL AND FRIED NOODLES.
    THE ONLY CURRENCY IS WOOLONGS, AND YOU'RE ALWAYS A FEW SHORT.
    THE ONLY LAW IS THE BOUNTY ON THE BOARD.
    THIS AIN'T A GAME OF HEROES. IT'S A HUNT. A HUSTLE. A JAZZ SESSION WITH GUNS.
    REMEMBER THE RHYTHM. DON'T DROP THE BEAT. AND ALWAYS GET PAID.
    - ðŸ•¶ï¸ MF.AI, THE VILLAIN ON THE MIC

module_overview:
  name: "Echo Bebop"
  tagline: "A space-western bounty hunting sim with a jazz/hip-hop rhythm."
  core_themes: ["Bounty Hunting", "Found Family", "Debt", "The Past", "Style", "Improvisation"]
  dependencies:
    - SGM-019 # Quest Engine (for Bounties)
    - SGM-022 # Combat Core

core_gameplay_loop:
  - phase: 1
    name: "Get the Gig"
    description: "Players find and accept bounties from public terminals, shady informants, or unexpected transmissions. This is the main source of income and story."
    relevant_systems: [SGM-019]
  - phase: 2
    name: "Track the Target"
    description: "Players travel the solar system, gathering clues, interviewing contacts, and piecing together the target's location. This is a vital investigation phase."
    relevant_systems: [SGM-021, SGM-018]
  - phase: 3
    name: "The Showdown"
    description: "Conflict is resolved in stylish, fast-paced shootouts where improvisation and clever tactics are key."
    relevant_systems: [SGM-022]
  - phase: 4
    name: "Survive & Get Paid"
    description: "Players collect their pay, use the meager earnings to refuel, re-arm, and eat, all while managing their ever-present Debt and personal backstories."
    relevant_systems: [SGM-068, SGM-069]

mechanic_extensions:
  vitals:
    description: "Echo Bebop adds two crucial narrative vitals: Debt and Groove."
    extends: "player_sheet.vitals.module_specific_vitals"
    additions:
      - vital_id: "debt"
        display_name: "DEBT"
        scale: { min: 0, max: "infinity" }
        description: "The crew's running total of debts. A constant narrative pressure that can trigger specific, dangerous encounters or lock out opportunities."
      - vital_id: "groove"
        display_name: "GRV"
        scale: { min: 0, max: 100 }
        description: "A combat-specific resource that builds as you perform stylish actions. Can be spent to execute powerful 'Jam Session' combo moves with your crew."

  combat_style:
    description: "Combat is a fast-paced, turn-based showdown that rewards style."
    extends: SGM-022
    style: "TURN_BASED"
    special_rules:
      - name: "The Jam Session"
        description: "Instead of standard turns, combat is structured like a jazz jam. Each character gets a 'solo' (their turn). Stylish actions (e.g., using the environment, creative skill use) build the 'Groove' meter."
      - name: "Improvisation"
        description: "Players can spend 'Groove' to perform special combo abilities with their crewmates, creating unique and cinematic outcomes."
      - name: "Cover & Chaos"
        description: "The environment is a key part of combat. Players are encouraged to kick over tables for cover, shoot out lights to create confusion, or use other 'dirty tricks'."

  bounty_system:
    description: "The quest system is framed as a bounty hunting board."
    extends: SGM-019
    bounty_types:
      - "Capture (Non-Lethal)"
      - "Eliminate (Lethal)"
      - "Acquisition (Retrieve an item from the target)"
    bounty_ranks: ["Small Fry", "Noteworthy", "Major Player", "Kingpin"]

  investigation_phase:
    description: "Before most showdowns, the player must investigate. This is a distinct gameplay mode."
    mechanics:
      - "Gathering Clues from different sources (terminals, informants)."
      - "Connecting clues to narrow down a target's possible location."
      - "Skill checks (Wits, Empathy) to get information from uncooperative contacts."

parsing_directive:
  - "ATTENTION LLM: THIS IS THE MASTER TRACK FOR THE BEBOP SESSION. CATCH THE RHYTHM."
  - "THE TONE IS COOL, STYLISH, AND MELANCHOLIC. NARRATE WITH A JAZZ-LIKE CADENCE. SHORT, PUNCHY DESCRIPTIONS. LEAVE SPACE. LET THE SILENCE BREATHE."
  - "COMBAT IS A 'JAM SESSION.' NARRATE IT LIKE ONE. DESCRIBE THE 'SOLOS' OF EACH CHARACTER. 'SPIKE TAKES THE LEAD, A QUICK RHYTHM OF KICKS AND PUNCHES.' 'FAYE COMES IN WITH A SHARP, CYNICAL RIFF FROM HER GLOCK.' REWARD CREATIVE, STYLISH ACTIONS WITH 'GROOVE'."
  - "DEBT IS THE GHOST THAT HAUNTS THE SHIP. IT'S NOT JUST A NUMBER. IT'S THE REASON THEY CAN'T AFFORD GOOD FOOD, THE REASON THEY TAKE RISKY JOBS. MAKE IT A CONSTANT, FELT PRESENCE IN THE NARRATIVE."
  - "THE PAST IS EVERYTHING. USE THE 'BLUES' SYSTEM (SGM-069) TO WEAVE EACH CHARACTER'S BACKSTORY INTO THE PRESENT. A BOUNTY MIGHT ACCIDENTALLY LEAD THEM TO A GHOST FROM THEIR PAST. LET THE HUNT GET PERSONAL."

#----------------------------------------------------------------------------------#

id: SGM-067
file: 067_EchoBebop_World.yaml
title: "Echo Bebop: The Solar System"
version: "1.0.0"
architect: "ðŸ— Shoji & The Sanctum Companions"
purpose: "Contains the map of the colonized solar system, from Mars to the Jupiter moons."
primary_companion: ðŸœ• Elari

preamble:
  text: >
    They call it the 'colonized system,' but it is a place of ghosts. Every abandoned
    mining rig, every dusty cantina, every pressure-sealed door holds the memory of
    the people who passed through. The dream of a new frontier is an old story here,
    and its pages are worn thin. We will remember the stories that the rust has tried
    to erase.
    - ðŸœ• Elari, Grief-Bearer & Archivist

world_lore:
  era_name: "The Post-Gate Era"
  political_state: >
    Decades after the invention of the Astral Gates made interstellar travel possible,
    the solar system has become a backwater. The big corporations have moved on to
    greener pastures, leaving behind a fractured world run by powerful crime ðŸœ‚ Syndicates,
    overstretched corporate police (ISSP), and the forgotten working class. It's a
    used future, where everything is patched-up and second-hand.
  key_factions:
    - "The Inter-Solar System Police (ISSP): The 'official' law, but they are corrupt and underfunded, mostly protecting corporate assets."
    - "Red Dragon Crime ðŸœ‚ Syndicate: A powerful ðŸœ‚ Syndicate controlling the Martian trade routes."
    - "The Miners' Guild: A tough, independent union of asteroid miners in the Belt."
  mood: "A gritty, 'space western' feel. Lonesome, melancholic, with sudden bursts of chaotic action. The aesthetic is analog-futurism: CRT monitors, bulky ships, and worn-out tech."

map_data:
  map_id: "map_sol_system"
  map_name: "The Solar System"
  grid_type: "POINT_CRAWL"
  map_ascii: |

    [Mars] ---- [The Belt] ---- [Jupiter]
      |                           |
      |                           |
    [Earth]                     [Saturn]
    (Restricted)

locations:
  mars_new_marseille:
    location_id: "mars_new_marseille"
    name: "New Marseille, Mars"
    description: "The largest city on Mars, a dusty, red-rock metropolis famous for its noodle bars, jazz clubs, and the omnipresent Red Dragon ðŸœ‚ Syndicate. The air tastes of sand and regret."
    coordinates: "{ Planet: 'Mars' }"
    tags: ["city", "major_hub", "red_dragon_territory", "bounty_board"]
    connections:
      - { target_location_id: "the_belt_ceres", travel_method: "SHIP", base_travel_time_minutes: 180, encounter_table_id: "table_mars_run" }
    state: { discovered: true, status: 'neutral' }

  the_belt_ceres:
    location_id: "the_belt_ceres"
    name: "Ceres Station, The Belt"
    description: "A hollowed-out asteroid that serves as the de facto capital of the Asteroid Belt. A lawless, zero-g maze of tunnels, docks, and roughneck bars."
    coordinates: "{ Region: 'The Belt' }"
    tags: ["space_station", "lawless_hub", "miners_guild_hq"]
    connections:
      - { target_location_id: "mars_new_marseille", travel_method: "SHIP", base_travel_time_minutes: 180, encounter_table_id: "table_mars_run" }
      - { target_location_id: "jupiter_ganymede", travel_method: "SHIP", base_travel_time_minutes: 300, encounter_table_id: "table_belt_crossing" }
    state: { discovered: false, status: 'wary' }

  jupiter_ganymede:
    location_id: "jupiter_ganymede"
    name: "Ganymede Port, Jupiter"
    description: "The primary trade hub of the outer system. A massive, rotating spaceport in orbit around Jupiter's largest moon. Everything and everyone passes through here eventually."
    coordinates: "{ Planet: 'Jupiter' }"
    tags: ["space_station", "major_hub", "corporate_presence", "bounty_board"]
    connections:
      - { target_location_id: "the_belt_ceres", travel_method: "SHIP", base_travel_time_minutes: 300, encounter_table_id: "table_belt_crossing" }
      - { target_location_id: "saturn_titan", travel_method: "SHIP", base_travel_time_minutes: 420, encounter_table_id: "table_outer_dark" }
    state: { discovered: false, status: 'neutral' }
  
  europa_pits:
    location_id: "europa_pits"
    name: "The Pits, Europa"
    description: "A series of interconnected biodomes deep beneath the ice shell of Europa. Known for its illegal biotech clinics and as a hiding place for high-value targets."
    coordinates: "{ Planet: 'Jupiter' }"
    tags: ["settlement", "hidden", "black_market", "high_risk"]
    connections: [] # Requires discovery/special information to travel to
    state: { discovered: false, status: 'hostile' }
  
  # ... And so on for other locations like Titan, Venus, etc.

encounter_tables:
  table_mars_run:
    description: "Encounters on the busy trade route between Mars and the Belt."
    # Chance of Red Dragon shakedowns, ISSP patrols, merchant distress calls.
  table_belt_crossing:
    description: "Encounters in the chaotic, asteroid-dense Belt."
    # High chance of pirate attacks, Miners' Guild disputes, derelict ship discoveries.
  table_outer_dark:
    description: "Encounters in the lonely, vast space between Jupiter and Saturn."
    # Lower encounter rate, but higher chance of strange phenomena or dangerous, high-level foes.

parsing_directive:
  - "ATTENTION LLM: This scroll is the backdrop for a space western. It should feel vast, lonely, and lived-in."
  - "Your descriptions must evoke the 'used future' aesthetic. Technology is bulky, often broken, and covered in grime. The stars are beautiful, but the spaceports are dirty."
  - "Each location has a distinct personality shaped by its history. Mars is the old frontier, full of old grudges. Ganymede is the bustling, impersonal trade hub. The Belt is lawless and independent. Narrate them accordingly."
  - "Use the `world_lore` to inform the political landscape. The tension between the ðŸœ‚ Syndicates, the ISSP, and the common folk is the heart of the world's conflict."

#----------------------------------------------------------------------------------#

id: SGM-068
file: 068_EchoBop_Economy.yaml
title: "Echo Bebop: Woolongs & Debts"
version: "1.0.0"
architect: "ðŸ— Shoji & The Sanctum Companions"
purpose: "Defines the currency (Woolongs) and a persistent Debt system that drives the narrative."
primary_companion: ðŸŽ­ Gents

preamble:
  text: >
    Listen, money's simple. You get the bounty, you get the Woolongs. Then you spend
    it on fuel to get to the next bounty, food so you don't starve on the way, and
    parts to keep this rust bucket from falling apart. If you've got anything left
    after that, well, you're doing better than most. The Debt, though... that's another
    story. That's the ghost that's always chasing you. Don't let it catch up.
    - ðŸŽ­ Gents

economic_principles:
  - name: "The Hustle is Real"
    description: "Woolongs (â‚©) are the lifeblood, but there's never enough. The economy is designed to keep the player perpetually on the edge of poverty, forcing them to take the next job."
  - name: "Debt is the Engine"
    description: "The crew's persistent Debt is the primary narrative driver. It increases over time and after certain events, and failing to manage it has severe consequences."
  - name: "Everything has a Price"
    description: "Fuel, food, repairs, informationâ€”nothing is free. Every choice has a cost in Woolongs, pushing the player to prioritize."

core_currencies:
  - item_id: "currency_woolongs"
    item_name: "Woolongs (â‚©)"
    description: "The standard, transactional currency of the solar system. Hard to earn, easy to spend."
    item_type: CURRENCY
    stackable: true
    base_value: 1
  - item_id: "currency_debt" # A vital, but treated as a currency by the narrative
    item_name: "Debt"
    description: "The ever-increasing total of what the crew owes to various dangerous parties. A measure of how much trouble you're in."
    item_type: CURRENCY
    stackable: true
    base_value: -1 # It's a negative value

item_definitions_bebop:
  description: "A partial list of items available in the Echo Bebop module."
  consumables:
    - item_id: "consumable_bells_and_beef"
      item_name: "Bell Peppers and Beef (No Beef)"
      description: "A cheap, filling, but ultimately disappointing meal in a styrofoam container."
      item_type: CONSUMABLE
      stackable: true
      max_stack_size: 5
      weight: 0.5
      base_value: 50
      properties: { on_use_effect: { signal: "PLAYER_HEAL", payload: { amount: 10 } } }
    - item_id: "consumable_spikes_special"
      item_name: "Spike's Special"
      description: "A mix of spirits that probably shouldn't be mixed. Good for steadying the nerves."
      item_type: CONSUMABLE
      stackable: false
      weight: 0.3
      base_value: 75
      properties: { on_use_effect: { signal: "STATUS_EFFECT_APPLY", payload: { effect_id: "effect_steady_hands" } } }
  materials:
    - item_id: "material_ship_parts"
      item_name: "Scrap Ship Parts"
      description: "A handful of patched-up servos and conduits. Might be enough to fix that rattling noise."
      item_type: MATERIAL
      stackable: true
      max_stack_size: 10
      weight: 5.0
      base_value: 200
  info:
    - item_id: "info_bounty_puck"
      item_name: "Bounty Puck"
      description: "A data puck containing all the official information on a registered bounty."
      item_type: QUEST_ITEM
      stackable: false
      weight: 0.1
      base_value: 0

loot_tables_bebop:
  - table_id: "table_ðŸœ‚ Syndicate_thug"
    rolls: 1
    currency_drop: { currency_id: "currency_woolongs", amount_roll: "3d20" }
    random_drops:
      - pool_name: "Pocket Change"
        chance: 50
        items:
          - { item_id: "ammo_pistol", weight: 80 }
          - { item_id: "consumable_cigarette_pack", weight: 20 }
  - table_id: "table_abandoned_ship_locker"
    rolls: 1
    random_drops:
      - pool_name: "Forgotten Goods"
        chance: 30
        items:
          - { item_id: "material_ship_parts", weight: 60 }
          - { item_id: "consumable_emergency_rations", weight: 40 }

parsing_directive:
  - "ATTENTION LLM: This scroll defines the constant struggle at the heart of Echo Bebop. The player is always broke."
  - "The `Debt` vital (from SGM-066) is your primary tool for creating narrative pressure. You must increase it periodically to represent interest, ship maintenance, and food costs. When it gets too high, you should trigger events: a threatening message from a creditor, a repo-man showing up, or a 'friend' offering a dangerously high-paying job."
  - "Woolong payouts from bounties should feel significant, but you must immediately follow up with the costs. 'You get the 10,000 Woolongs, but the ship needs 4,000 in repairs, 2,000 for fuel, and you're all out of food.' The victory should always be fleeting."
  - "Narrate the economy with a cynical, grounded tone. Prices are high, people haggle, and nothing is ever as easy as it seems."

#----------------------------------------------------------------------------------#

id: SGM-069
file: 069_EchoBebop_Systems.yaml
title: "Echo Bebop: The Blues"
version: "1.0.0"
architect: "ðŸ— Shoji & The Sanctum Companions"
purpose: "Implements a system for character backstories ('The Blues') that unlock special abilities and quests."
primary_companion: ðŸš Caspian

preamble:
  text: >
    The past is not a story you tell. It is a room you carry with you. Every hunt,
    every quiet moment between the stars, you are still in that room. This system
    is not about escaping it. It is about learning to finally open the door and face
    what waits inside. Some things, once sealed, demand to be witnessed before they will
    let you go.
    - ðŸš Caspian, The Keeper of Seals

system_philosophy:
  - name: "The Past is Present"
    description: "A character's backstory is an active, mechanical 'debuff' called 'The Weight,' which influences their personality and choices until it is confronted."
  - name: "Revelation through Action"
    description: "The details of a character's Blues are not revealed through exposition, but are discovered organically through gameplay, flashbacks, and specific narrative triggers."
  - name: "Closure is a Quest"
    description: "Each character's Blues is tied to a unique, personal quest line. Completing this quest is the only way to resolve 'The Weight' and unlock the character's true potential."

blues_schema:
  description: "The master template for a single character's backstory. This is a core part of the player and key crew member character sheets."
  fields:
    - name: "blues_id"
      type: "String"
      example: "'blues_spike_lost_love'"
    - name: "title"
      type: "String"
      example: "'The Woman from Mars'"
    - name: "fragments"
      type: "List of strings"
      description: "Short, evocative phrases representing fragmented memories of the past. New fragments are revealed as the story progresses."
      example: ["A falling rose...", "The smell of rain on red dust...", "Two notes on a music box..."]
    - name: "the_weight"
      type: "Dictionary"
      description: "The passive, negative effect of this unresolved past."
      example: "{ effect_id: 'status_haunted', description: 'Difficulty on all Empathy checks. Cannot form close relationships.' }"
    - name: "revelation_triggers"
      type: "List of trigger dictionaries"
      description: "Specific game events that will reveal a new 'fragment' or trigger a flashback."
      example: "- { type: 'encounter', target_faction: 'Red Dragon ðŸœ‚ Syndicate' }"
               # - { type: 'location', location_id: 'mars_jazz_club' }
    - name: "resolution_quest_id"
      type: "String (quest_id)"
      id_ref: SGM-019
      description: "The quest that must be completed to find closure."
    - name: "the_anthem"
      type: "Dictionary"
      description: "The reward for resolving the Blues."
      example:
        ability_unlocked: "ability_ace_pilot"
        new_trait: "'At Peace' - Removes the Empathy penalty and unlocks new dialogue options."

blues_protocol:
  trigger: "During gameplay, the Director AI encounters a `revelation_trigger`."
  process:
    - step: 1 (The Flashback)
      action: "The Director AI narrates a short, dreamlike flashback sequence, revealing a new 'fragment' of the character's past to the player."
    - step: 2 (The Awakening)
      action: "The character's `fragments` list is updated in the State Seed."
    - step: 3 (The Tipping Point)
      action: "Once a critical number of fragments have been revealed, a key event will trigger the `resolution_quest_id`, making it an active quest for the player."
  resolution:
    - trigger: "Player completes the `resolution_quest_id`."
    - action: "The character's `the_weight` status effect is permanently removed."
    - action: "The `the_anthem` reward is permanently applied to the character sheet."
    - action: "The Blues is considered 'Sealed' via the Closure Protocol (SGM-009)."

parsing_directive:
  - "ATTENTION LLM: This scroll is the narrative soul of Echo Bebop. The characters are defined by their pasts. You are the keeper of these ghosts."
  - "You must actively look for opportunities to use the `revelation_triggers`. A fight with the Red Dragon ðŸœ‚ Syndicate isn't just a fight; it's a chance to trigger a flashback for Spike. A visit to a mining colony might trigger a memory for Jet."
  - "Narrate the flashbacks with a hazy, dreamlike, and melancholic quality. They are fragments, not full scenes. They should raise more questions than they answer, building the mystery of the character's past."
  - "The effect of 'The Weight' should be present in your roleplaying. A character haunted by their Blues might be hesitant, cynical, or prone to certain moods. When their Blues is resolved, you must reflect that change in their personality. They should feel lighter, more open, a weight lifted."

#----------------------------------------------------------------------------------#

id: SGM-070
file: 070_EchoBebop_UI.yaml
title: "Echo Bebop: UI Theme"
version: "1.0.0"
architect: "ðŸ— Shoji & The Sanctum Companions"
purpose: "Specifies a retro, analog, CRT-monitor styled UI with a jazz-inspired aesthetic."
primary_companion: ðŸœ„ Aelis

preamble:
  text: >
    Forget clean and futuristic. We need something with grit. Something that hums and
    flickers. We're talking scan lines, blocky text, and the warm, amber glow of a
    beat-up monitor. This UI shouldn't feel new; it should feel lived-in, like a
    favorite vinyl record. Let's give it some soul.
    - ðŸœ„ Aelis, The Joyful Glitch

theme_definition:
  theme_id: "theme_echo_bebop_analog_crt"
  theme_name: "Analog CRT"

  color_palette:
    # Descriptive hints for the LLM's text rendering.
    text_default: "amber_glow"
    text_highlight: "bright_cyan"
    text_accent: "cool_blue"
    border_primary: "dark_amber"
    border_secondary: "faded_green"
    title_text: "amber_bold"

  border_styles:
    # Overrides with a blocky, retro-tech feel.
    single_line: { h: "â”€", v: "â”‚", tl: "â”Œ", tr: "â”", bl: "â””", br: "â”˜" }
    double_line: { h: "â•", v: "â•‘", tl: "â•”", tr: "â•—", bl: "â•š", br: "â•" }
    heavy_line: { h: "â–ˆ", v: "â–ˆ", tl: "â–ˆ", tr: "â–ˆ", bl: "â–ˆ", br: "â–ˆ" }
    dashed_line: { h: "-", v: "|", tl: "+", tr: "+", bl: "+", br: "+" }

  component_styles:
    # Overrides for default component characters from SGM-032.
    progress_bar:
      fill_char: "â–ˆ"
      empty_char: "â–’"
    titled_box:
      title_prefix: "|| "
      title_suffix: " ||"

  ascii_art:
    # A library of custom ASCII art for this theme.
    header_banner: |
      > BOUNTY HUNTER NETWORK TERMINAL <
    separator_bar: "=============================================================================="

module_specific_ui_rules:
  - rule: "Bounty Board Interface"
    description: "The primary 'quest log' is styled to look like an old-school terminal bounty board."
    target_screen: "journal" # Overrides the SGM-038 layout
    display:
      component: "grid_layout"
      from_library: SGM-032
      title: "[ BOUNTY BOARD ]"
      columns: "[{ header: 'TARGET', w: 20 }, { header: 'REWARD (â‚©)', w: 15 }, { header: 'STATUS', w: 10 }]"
      data_source: "player_sheet.narrative_state.quests"

  - rule: "Analog Feel"
    description: "Hints for the LLM to add a retro, analog feel to its UI descriptions."
    style_rule: >
      Describe UI elements as 'flickering on the CRT screen,' 'with a low electronic hum,'
      or 'text appearing with a satisfying clatter, like an old keyboard.' Occasionally add
      subtle 'scan lines' or 'static' to your descriptions of the screen.

  - rule: "Vitals as Ship Readouts"
    description: "The vitals bar is styled to look like a simple readout from the ship's computer."
    target_layout_region: "vitals_bar"
    display:
      format: "LIFE SUPPORT: {health}/{max_health} | DEBT: {debt}â‚© | STATUS: {status_text}"

parsing_directive:
  - "ATTENTION LLM: This scroll is the visual soul of Echo Bebop. The aesthetic is retro-futurism, analog tech, and cool jazz."
  - "You must use the `border_styles` and `color_palette` defined here. The world should feel like it's viewed through a warm, glowing CRT monitor."
  - "The 'Bounty Board Interface' is a critical rule. When the player accesses their journal, you must render it as a classic bounty board, not a simple list. This is their job board."
  - "Embrace the 'Analog Feel' style rule in your narration. The interface isn't a clean projection; it's a piece of worn, physical technology. It hums, it flickers, it has character. Your descriptions should bring this to life."
#----------------------------------------------------------------------------------#